{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app/index.js","webpack:///./src/app/index.html","webpack:///./src/app/index.less","webpack:///./node_modules/css-loader/lib/css-base.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","html","css","FreelogMemeResourceRender","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","self","shadowRoot","attachShadow","innerHTML","root","init","getDom","imgSrc","getAttribute","descArr","decodeURIComponent","JSON","parse","renderImg","e","console","error","$imgBox","querySelector","type","arguments","length","undefined","tags","isOnline","tagsQueryStr","targTypeStr","window","FreelogApp","QI","fetch","__auth_info__","__auth_node_id__","then","resp","json","presentableId","resourceId","imgHtml","getImageHtml","introHtml","getIntroHtml","_this2","map","it","getStyleStr","join","obj","str","prop","formatStyleValue","formatStyleProp","replace","toLocaleLowerCase","test","customElements","define","push","useSourceMap","list","toString","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","stringify","sourceURLs","sources","source","sourceRoot","concat","cssWithMappingToString","mediaQuery","alreadyImportedModules","id"],"mappings":"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","file":"freelog-meme-resource-render.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","var html = require('./index.html')\nvar css = require('./index.less')\n\nclass FreelogMemeResourceRender extends HTMLElement {\n  constructor() {\n    super()\n    let self = this;\n    let shadowRoot = self.attachShadow({mode: 'open'});\n    shadowRoot.innerHTML = `<style>${css}</style>` + html\n    self.root = shadowRoot\n  }\n\n  connectedCallback (){\n    this.init()\n  }\n\n  init (){\n    this.getDom()\n\n    this.imgSrc = this.getAttribute('data-src')\n    var descArr = decodeURIComponent(this.getAttribute('data-desc'))\n    \n    try{\n      this.descArr = JSON.parse(descArr)\n      this.renderImg()\n    }catch(e){\n      console.error(e)\n    }\n  }\n\n  getDom (){\n    this.$imgBox = this.root.querySelector('#freelog-memerender2-wwzh-app')\n  }\n\n  fethchResourcesList (type = '', tags = '', isOnline = 1){\n    var tagsQueryStr = '', targTypeStr = ''\n    if(tags != ''){\n      tagsQueryStr = `&tags=${tags}`\n    }\n    if(type != ''){\n      targTypeStr = `&resourceType=${type}`\n    }\n    return window.FreelogApp.QI.fetch(`/v1/presentables?nodeId=${window.__auth_info__.__auth_node_id__}&isOnline=${isOnline}${targTypeStr}${tagsQueryStr}`)\n    .then(resp => resp.json())\n  }\n\n  fetchResourceDetail (presentableId, resourceId){\n    return window.FreelogApp.QI.fetch(`/v1/auths/presentable/${presentableId}.info?nodeId=${window.__auth_info__.__auth_node_id__}&resourceId=${resourceId}`)\n            .then(resp => resp.json())\n  }\n\n  renderImg (){\n    var imgHtml = this.getImageHtml()\n    var introHtml = this.getIntroHtml()\n    this.$imgBox.innerHTML = `\n      ${imgHtml}\n      ${introHtml}\n    `\n  }\n\n  getImageHtml (){\n    return `<image class=\"meme-img\" src=\"${this.imgSrc}\" />`\n  }\n\n  getIntroHtml (){\n    return this.descArr.map(it => {\n                      \n      // \"position\": {                                   \n      //     \"x\": \"2%\", \n      //     \"y\": \"1%\"\n      // },\n      // \"size\": {\n      //     \"width\": \"50%\",                             \n      //     \"height\": \"30%\"                        \n      // },\n      // \"fontSize\": 24,                                  \n      // \"color\": \"#ffffff\",                              \n      // \"textAlign\": \"center\"  \n      var styleStr = this.getStyleStr(it)\n      return `\n        <div class=\"meme-intro\" style=\"${styleStr}\">${it.name}</div>\n      `\n      \n    }).join(' ')\n  }\n\n  getStyleStr (obj){\n    \n    var str = ''\n    for(let prop in obj){\n      switch(prop){\n        case 'position': {}\n        case 'size': {\n          str += this.getStyleStr(obj[prop])\n          break\n        }\n        case 'x': {\n          str += `left: ${this.formatStyleValue(obj[prop])};`\n          break\n        }\n        case 'y': {\n          str += `top: ${this.formatStyleValue(obj[prop])};`\n          break\n        }\n        case 'left': {}\n        case 'right': {}\n        case 'top': {}\n        case 'bottom': {}\n        case 'width': {}\n        case 'height': {}\n        case 'fontSize': {\n          if(obj[prop] == '') break\n          var name = this.formatStyleProp(prop),\n              value = this.formatStyleValue(obj[prop])\n          str += `${name}: ${value};`\n          break\n        }\n        case 'color': {}\n        case 'textAlign': {\n          var name = this.formatStyleProp(prop),\n              value = obj[prop]\n          str += `${name}: ${value};`\n          break\n        }\n        default: {\n          break \n        }\n      }\n    }\n    return str\n  }\n\n  formatStyleProp (prop){\n    return prop.replace(/[A-Z]/g, (s) => '-' + s.toLocaleLowerCase())\n  }\n\n  formatStyleValue (value){\n    \n    return /(%|px)$/.test(value) ? value : value + 'px'\n  }\n}\n\ncustomElements.define('freelog-meme-resource-render', FreelogMemeResourceRender)\n","module.exports = \"<div id=freelog-memerender2-wwzh-app>\\n  \\n  \\n</div>\\n\";","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"#freelog-memerender2-wwzh-app{position:relative;width:500px;margin:auto}#freelog-memerender2-wwzh-app .meme-img{display:block;width:100%}#freelog-memerender2-wwzh-app .meme-intro{position:absolute;z-index:10}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n"],"sourceRoot":""}